<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>학생용 자유물체도 그리기</title>
    <link rel="stylesheet" href="./src/styles.css" />
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['\\(', '\\)']],
          displayMath: [['\\[', '\\]']],
          processEscapes: true
        },
        startup: {
          ready: () => {
            MathJax.startup.defaultReady();
            MathJax.startup.promise.then(() => {
              console.log('MathJax is ready');
              // MathJax가 준비되면 모든 수식 렌더링
              if (window.MathJax && window.MathJax.typesetPromise) {
                const problemTextEl = document.getElementById('problem-text');
                if (problemTextEl) {
                  window.MathJax.typesetPromise([problemTextEl]).catch((err) => {
                    console.error('MathJax 초기 렌더링 오류:', err);
                  });
                }
              }
            });
          }
        }
      };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body class="page page-student">
    <header class="site-header">
      <h1>자유물체도 그리기</h1>
      <p class="subtitle">문제를 보고 자유물체도를 그린 뒤, 제출하여 AI 피드백을 받아보세요.</p>
    </header>

    <main class="content content-two-columns">
      <section class="card problem-panel">
        <header class="panel-header">
          <h2>문제</h2>
          <div id="student-info" class="student-info"></div>
        </header>

        <div id="problem-visual" class="problem-visual">
          <!-- 선택된 문제에 따라 JS에서 이미지/도식이 표시됨 -->
        </div>

        <div id="problem-text" class="problem-text">
          <!-- 문제 설명 텍스트 -->
        </div>
      </section>

      <section class="card drawing-panel">
        <h2>그리기 도구를 선택한 후 좌표평면에 그래프를 그릴 수 있습니다.</h2>
        <p class="hint">
          꼭짓점과 꼭짓점 외에 지나는 점을 찍은 후 '그래프 그리기'를 누르면 그래프가 그려집니다.<br>
          그래프를 그리기 전에 '지우기'를 눌러 캔버스를 초기화할 수 있습니다.
        </p>

        <div class="drawing-tools-wrapper">
          <div class="drawing-tools">
            <h3>그리기 도구</h3>
            <div class="tool-buttons">
              <button id="tool-vertex" class="tool-btn active" data-mode="vertex">꼭짓점</button>
              <button id="tool-point" class="tool-btn" data-mode="point">꼭짓점 외에 지나는 점</button>
            </div>
          </div>
          <div class="canvas-wrapper">
            <canvas id="fbd-canvas" width="480" height="360"></canvas>
          </div>
        </div>

        <div class="drawing-actions">
          <button id="clear-canvas" class="btn" type="button">지우기</button>
          <button id="draw-graph" class="btn primary" type="button">그래프 그리기</button>
        </div>

        <form id="answer-form" class="form-vertical">
          <label>
            그래프에 대한 설명
            <textarea
              id="answer-description"
              rows="3"
              placeholder="그린 그래프에 대해 다음 요소들을 포함하여 설명하시오.&#10;[꼭짓점의 위치, y절편, 축]"
            ></textarea>
          </label>

          <div class="form-actions">
            <button type="submit" class="btn primary">제출하고 AI 피드백 받기</button>
          </div>
        </form>

        <section id="feedback-section" class="feedback-section hidden">
          <h3>AI 피드백</h3>
          <div id="feedback-content" class="feedback-content"></div>
        </section>
      </section>
    </main>

    <footer class="site-footer">
      <a href="./index.html" class="btn link">메인으로 돌아가기</a>
    </footer>

    <script type="module" src="./src/main.js"></script>
  </body>
</html>





